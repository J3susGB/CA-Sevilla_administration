<div class="contenedor_xl min-h-full">
  <!-- Botón atrás -->
  <div>
    <a [routerLink]="backLink" class="cursor-pointer boton transition-all duration-300 ease-in-out">
      Atrás
    </a>
  </div>

  <h2 class="text-3xl font-bold text-center mb-8 mt-8 text-letra">
    Gestión de Observaciones
  </h2>

  <!-- Filtros -->
  <div class="contenedor_md flex gap-4 mb-4" [formGroup]="filterForm">
    <mat-form-field appearance="fill" class="flex-1">
      <mat-label>Buscar</mat-label>
      <input matInput placeholder="Código o descripción" formControlName="textFilter" />
    </mat-form-field>

    <mat-form-field appearance="fill" class="w-1/3">
      <mat-label>Categoría</mat-label>
      <input matInput placeholder="Ej: Oficial" formControlName="catFilter" />
    </mat-form-field>
  </div>

  <!-- Botón añadir -->
  <div class="contenedor_md flex justify-end gap-3 mb-2 text-letra hover:text-yellow-700 transition-color duration-300 ease-in-out">
    <button mat-flat-button color="primary" (click)="add()" class="cursor-pointer">
      <i class="fa-solid fa-plus"></i>
      Añadir
    </button>
  </div>

  <!-- Tabla agrupada por categoría -->
  <div class="contenedor_md space-y-12 mb-20">
    <div *ngFor="let categoria of (grouped | keyvalue)" class="space-y-4">
      <h3 class="text-xl font-bold text-letra">{{ categoria.key }}</h3>

      <table class="tabla-responsive w-full text-left border-collapse rounded-xl overflow-hidden shadow-lg bg-gray-350">
        <thead class="bg-bordes text-logo uppercase text-sm">
          <tr>
            <th class="px-4 py-3">Código</th>
            <th class="px-4 py-3">Descripción</th>
            <th class="px-4 py-3 text-center">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let o of categoria.value" class="border-b">
            <td data-label="Código" class="px-4 py-3">{{ o.codigo }}</td>
            <td data-label="Descripción" class="px-4 py-3">{{ o.descripcion }}</td>
            <td data-label="Acciones" class="px-4 py-3 text-center space-x-8">
              <a (click)="edit(o)"
                 class="text-yellow-600 hover:text-yellow-700 cursor-pointer transition-all duration-300 ease-in-out">
                <i class="fas fa-edit"></i>
              </a>
              <a (click)="delete(o)"
                 class="text-red-500 hover:text-red-700 cursor-pointer transition-all duration-300 ease-in-out">
                <i class="fas fa-trash-alt"></i>
              </a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
